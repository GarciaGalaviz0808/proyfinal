{% extends 'cliente/base.html' %}
{% load static %}

{% block title %}ArtStore - Tienda de Arte en Línea{% endblock %}

{% block content %}
<div class="hero">
    <div class="hero-content">
        <h1>Bienvenido a ArtStore</h1>
        <p class="hero-subtitle">Todo lo que necesitas para tu arte, aquí lo tenemos</p>
        <p class="hero-description">Descubre obras únicas, materiales de calidad y talento artístico en un solo lugar</p>
        <div class="hero-buttons">
            <a href="{% url 'productos_por_categoria' 'obras' %}" class="btn-hero-primary">
                <i class="fas fa-palette"></i> Ver Obras
            </a>
            <a href="{% url 'productos_por_categoria' 'suministros' %}" class="btn-hero-secondary">
                <i class="fas fa-brush"></i> Comprar Materiales
            </a>
        </div>
    </div>
</div>

<div class="categorias-destacadas">
    <h2>Explora Nuestras Categorías</h2>
    <div class="categorias-grid">
        <a href="{% url 'productos_por_categoria' 'obras' %}" class="categoria-card">
            <div class="categoria-icon">
                <i class="fas fa-paint-brush"></i>
            </div>
            <h3>Obras Originales</h3>
            <p>Piezas únicas creadas por artistas talentosos</p>
            <span class="categoria-link">Ver colección →</span>
        </a>
        
        <a href="{% url 'productos_por_categoria' 'suministros' %}" class="categoria-card">
            <div class="categoria-icon">
                <i class="fas fa-box-open"></i>
            </div>
            <h3>Suministros</h3>
            <p>Materiales de alta calidad para crear</p>
            <span class="categoria-link">Ver materiales →</span>
        </a>
        
        <a href="{% url 'productos_por_categoria' 'replicas' %}" class="categoria-card">
            <div class="categoria-icon">
                <i class="fas fa-copy"></i>
            </div>
            <h3>Réplicas</h3>
            <p>Reproducciones de obras maestras</p>
            <span class="categoria-link">Ver réplicas →</span>
        </a>
        
        <a href="{% url 'crear_encargo' %}" class="categoria-card">
            <div class="categoria-icon">
                <i class="fas fa-star"></i>
            </div>
            <h3>Encargos</h3>
            <p>Obras personalizadas a tu medida</p>
            <span class="categoria-link">Solicitar →</span>
        </a>
    </div>
</div>

{% if productos_destacados %}
<section class="productos-destacados">
    <h2>Productos Destacados</h2>
    <div class="galeria">
        {% for producto in productos_destacados %}
        <div class="tarjeta destacada">
            {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
            {% else %}
            <img src="{% static 'images/placeholder.png' %}" alt="{{ producto.nombre }}">
            {% endif %}
            
            <div class="destacado-badge">
                <i class="fas fa-star"></i> Destacado
            </div>
            
            <h3>{{ producto.nombre }}</h3>
            
            {% if producto.artista %}
            <p class="artista">por {{ producto.artista.nombre }}</p>
            {% endif %}
            
            <p class="precio">${{ producto.precio }}</p>
            
            <div class="botones">
                <a href="{% url 'detalle_producto' producto.id %}" class="btn-info">
                    Ver detalles
                </a>
                
                {% if producto.stock > 0 and user.is_authenticated %}
                <form method="POST" action="{% url 'agregar_al_carrito' producto.id %}" class="form-agregar-carrito">
                    {% csrf_token %}
                    <input type="hidden" name="cantidad" value="1">
                    <button type="submit" class="btn-comprar">
                        <i class="fas fa-cart-plus"></i>
                    </button>
                </form>
                {% elif producto.stock > 0 %}
                <a href="{% url 'login' %}?next={% url 'detalle_producto' producto.id %}" class="btn-comprar">
                    <i class="fas fa-cart-plus"></i>
                </a>
                {% else %}
                <button class="btn-comprar disabled" disabled>
                    <i class="fas fa-ban"></i>
                </button>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="ver-mas">
        <a href="{% url 'productos_por_categoria' 'suministros' %}" class="btn-ver-mas">
            Ver todos los productos <i class="fas fa-arrow-right"></i>
        </a>
    </div>
</section>
{% endif %}

<section class="artistas-destacados">
    <div class="artistas-destacados-container">
        <h2 class="section-title">Conoce a Nuestros Artistas</h2>
        <div class="artistas-grid">
            {% for artista in artistas_destacados %}
            <div class="artista-card">
                <div class="artista-imagen">
                    {% if artista.foto %}
                    <img src="{{ artista.foto.url }}" alt="{{ artista.nombre }}" class="artista-foto-grande">
                    {% else %}
                    <i class="fas fa-user-circle"></i>
                    {% endif %}
                </div>
                <div class="artista-info">
                    <h3>{{ artista.nombre }}</h3>
                    <p class="especialidad">{{ artista.especialidad }}</p>
                    <p class="descripcion">{{ artista.biografia|truncatechars:120 }}</p>
                    <a href="{% url 'detalle_artista' artista.id %}" class="artista-link">Ver obras →</a>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="ver-artistas">
            <a href="{% url 'artistas' %}" class="btn-ver-artistas">
                Conoce más artistas <i class="fas fa-users"></i>
            </a>
        </div>
    </div>
</section>

<section class="beneficios">
    <h2>¿Por qué elegir ArtStore?</h2>
    <div class="beneficios-grid">
        <div class="beneficio">
            <div class="beneficio-icon">
                <i class="fas fa-shipping-fast"></i>
            </div>
            <h3>Envío Rápido</h3>
            <p>Recibe tus productos en 24-48 horas en la Ciudad de México</p>
        </div>
        
        <div class="beneficio">
            <div class="beneficio-icon">
                <i class="fas fa-shield-alt"></i>
            </div>
            <h3>Compra Segura</h3>
            <p>Protegemos tus datos con encriptación de última generación</p>
        </div>
        
        <div class="beneficio">
            <div class="beneficio-icon">
                <i class="fas fa-handshake"></i>
            </div>
            <h3>Calidad Garantizada</h3>
            <p>Todos nuestros productos son de la más alta calidad</p>
        </div>
        
        <div class="beneficio">
            <div class="beneficio-icon">
                <i class="fas fa-headset"></i>
            </div>
            <h3>Soporte Personalizado</h3>
            <p>Te ayudamos a elegir los mejores materiales para tu proyecto</p>
        </div>
    </div>
</section>

<section class="testimonios">
    <h2>Lo que dicen nuestros clientes</h2>
    <div class="testimonios-grid">
        <div class="testimonio-card">
            <div class="testimonio-texto">
                <i class="fas fa-quote-left"></i>
                <p>Excelente calidad en los materiales. El lienzo y las pinturas al óleo superaron mis expectativas.</p>
            </div>
            <div class="testimonio-autor">
                <strong>Carlos Rodríguez</strong>
                <span>Artista profesional</span>
            </div>
        </div>
        
        <div class="testimonio-card">
            <div class="testimonio-texto">
                <i class="fas fa-quote-left"></i>
                <p>Encontré la pieza perfecta para mi sala. La atención al cliente fue excepcional.</p>
            </div>
            <div class="testimonio-autor">
                <strong>María González</strong>
                <span>Coleccionista</span>
            </div>
        </div>
        
        <div class="testimonio-card">
            <div class="testimonio-texto">
                <i class="fas fa-quote-left"></i>
                <p>Como estudiante de arte, los precios accesibles y calidad me han ayudado mucho.</p>
            </div>
            <div class="testimonio-autor">
                <strong>Fernando López</strong>
                <span>Estudiante de Bellas Artes</span>
            </div>
        </div>
    </div>
</section>

<div class="cta-final">
    <div class="cta-content">
        <h2>¿Listo para comenzar tu proyecto artístico?</h2>
        <p>Tenemos todo lo que necesitas para dar vida a tu creatividad</p>
        <div class="cta-buttons">
            <a href="{% url 'registro' %}" class="btn-cta-primary">
                <i class="fas fa-user-plus"></i> Crear cuenta gratis
            </a>
            <a href="{% url 'crear_encargo' %}" class="btn-cta-secondary">
                <i class="fas fa-paint-brush"></i> Solicitar encargo
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Animación de contador de carrito
if ({{ cantidad_carrito }} > 0) {
    const cartCount = document.querySelector('.carrito-count');
    if (cartCount) {
        cartCount.style.animation = 'bounce 0.5s ease';
        setTimeout(() => {
            cartCount.style.animation = '';
        }, 500);
    }
}

// Efecto hover en tarjetas destacadas
document.querySelectorAll('.tarjeta.destacada').forEach(card => {
    card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-10px) scale(1.02)';
        this.style.boxShadow = '0 15px 30px rgba(0,0,0,0.15)';
    });
    
    card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0) scale(1)';
        this.style.boxShadow = '0 4px 10px rgba(0,0,0,0.15)';
    });
});

// Animación de entrada para categorías
document.querySelectorAll('.categoria-card').forEach((card, index) => {
    card.style.animationDelay = `${index * 0.1}s`;
    card.classList.add('fade-in-up');
});

// Contador de productos en carrito (actualización en tiempo real)
function updateCartCount() {
    // En una implementación real, aquí harías una petición AJAX
    // Por ahora solo actualizamos visualmente
    const cartIcon = document.querySelector('.carrito-icon a');
    if (cartIcon && {{ cantidad_carrito }} === 0) {
        const countBadge = cartIcon.querySelector('.carrito-count');
        if (countBadge) {
            countBadge.style.display = 'none';
        }
    }
}

// Agregar al carrito desde la página principal
document.querySelectorAll('.form-agregar-carrito').forEach(form => {
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        if (!{{ user.is_authenticated|yesno:"true,false" }}) {
            window.location.href = "{% url 'login' %}?next={% url 'index' %}";
            return;
        }
        
        const button = this.querySelector('button');
        const originalHTML = button.innerHTML;
        
        // Mostrar animación
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
        button.disabled = true;
        
        // Simular envío del formulario
        setTimeout(() => {
            this.submit();
        }, 1000);
    });
});
</script>
{% endblock %}