{% extends 'cliente/base.html' %}
{% load static %}

{% block title %}Iniciar Sesión - ArtStore{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header">
            <h2><i class="fas fa-paint-brush"></i> Iniciar Sesión</h2>
            <p>Accede a tu cuenta de ArtStore</p>
        </div>
        
        <form method="POST" action="{% url 'login' %}">
            {% csrf_token %}
            
            {% if form.errors %}
            <div class="auth-error">
                <i class="fas fa-exclamation-circle"></i>
                Usuario o contraseña incorrectos. Por favor intenta de nuevo.
            </div>
            {% endif %}
            
            <div class="form-group">
                <label for="id_username"><i class="fas fa-user"></i> Nombre de usuario</label>
                <input type="text" name="username" id="id_username" 
                       class="form-control" required autofocus>
            </div>
            
            <div class="form-group">
                <label for="id_password"><i class="fas fa-lock"></i> Contraseña</label>
                <input type="password" name="password" id="id_password" 
                       class="form-control" required>
            </div>
            
            <div class="form-group remember">
                <input type="checkbox" name="remember" id="remember">
                <label for="remember">Recordar mi sesión</label>
            </div>
            
            <button type="submit" class="btn-login-submit">
                <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
            </button>
            
            <div class="auth-links">
                <a href="#" class="forgot-password">
                    <i class="fas fa-key"></i> ¿Olvidaste tu contraseña?
                </a>
                <a href="{% url 'registro' %}" class="register-link">
                    <i class="fas fa-user-plus"></i> ¿No tienes cuenta? Regístrate
                </a>
            </div>
        </form>
        
        <div class="auth-social">
            <p>O inicia sesión con:</p>
            <div class="social-buttons">
                <button class="btn-social google">
                    <i class="fab fa-google"></i> Google
                </button>
                <button class="btn-social facebook">
                    <i class="fab fa-facebook"></i> Facebook
                </button>
            </div>
        </div>
    </div>
    
    <div class="auth-welcome">
        <h3>¡Bienvenido de vuelta!</h3>
        <p>Inicia sesión para acceder a todas las funciones:</p>
        <ul>
            <li><i class="fas fa-shopping-cart"></i> Guardar productos en tu carrito</li>
            <li><i class="fas fa-history"></i> Ver tu historial de pedidos</li>
            <li><i class="fas fa-heart"></i> Guardar tus productos favoritos</li>
            <li><i class="fas fa-tags"></i> Recibir ofertas exclusivas</li>
            <li><i class="fas fa-paint-brush"></i> Solicitar encargos personalizados</li>
        </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Mostrar/ocultar contraseña
const passwordInput = document.getElementById('id_password');
const togglePassword = document.createElement('span');
togglePassword.innerHTML = '<i class="fas fa-eye"></i>';
togglePassword.className = 'toggle-password';
togglePassword.style.cursor = 'pointer';
togglePassword.style.position = 'absolute';
togglePassword.style.right = '10px';
togglePassword.style.top = '35px';

passwordInput.parentElement.style.position = 'relative';
passwordInput.parentElement.appendChild(togglePassword);

togglePassword.addEventListener('click', function() {
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
    this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
});

// Validación de formulario
document.querySelector('form').addEventListener('submit', function(e) {
    const username = document.getElementById('id_username').value.trim();
    const password = document.getElementById('id_password').value.trim();
    
    if (!username || !password) {
        e.preventDefault();
        alert('Por favor completa todos los campos.');
    }
});
</script>
{% endblock %}