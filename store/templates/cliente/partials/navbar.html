<!-- templates/cliente/partials/navbar.html -->
<nav class="navbar">
    <button class="menu-hamburguesa" aria-label="Abrir menú">
        <i class="fas fa-bars"></i>
    </button>
    
    <ul class="nav-links">
        <li><a href="{% url 'index' %}" {% if seccion == 'inicio' %}class="active"{% endif %}>Inicio</a></li>
        <li><a href="{% url 'productos_por_categoria' 'obras' %}" {% if seccion == 'obras' %}class="active"{% endif %}>Obras Originales</a></li>
        <li class="submenu">
            <a href="{% url 'productos_por_categoria' 'suministros' %}" {% if seccion == 'suministros' %}class="active"{% endif %}>Suministros ▾</a>
            <ul class="dropdown">
                <li><a href="{% url 'productos_por_categoria' 'oleos' %}">Óleos</a></li>
                <li><a href="{% url 'productos_por_categoria' 'acrilicos' %}">Acrílicos</a></li>
                <li><a href="{% url 'productos_por_categoria' 'lienzos' %}">Lienzos</a></li>
                <li><a href="{% url 'productos_por_categoria' 'pinceles' %}">Pinceles</a></li>
            </ul>
        </li>
        <li><a href="{% url 'artistas' %}" {% if seccion == 'artistas' %}class="active"{% endif %}>Artistas</a></li>
        <li><a href="{% url 'productos_por_categoria' 'replicas' %}" {% if seccion == 'replicas' %}class="active"{% endif %}>Réplicas</a></li>
        <li><a href="{% url 'crear_encargo' %}" {% if seccion == 'encargos' %}class="active"{% endif %}>Encargos personalizados</a></li>
        
        <!-- Menú de usuario (submenu) -->
        <li class="submenu user-submenu">
            {% if user.is_authenticated %}
                <a href="#" class="user-link">
                    <i class="fas fa-user"></i> {{ user.first_name|default:user.username }} ▾
                </a>
                <ul class="dropdown user-dropdown">
                    {% if user.is_staff or user.is_superuser %}
                        <li>
                            <a href="{% url 'panel_admin' %}">
                                <i class="fas fa-cog"></i> Panel Admin
                            </a>
                        </li>
                    {% else %}
                        <li>
                            <a href="{% url 'mis_pedidos' %}">
                                <i class="fas fa-box"></i> Mis Pedidos
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'ver_carrito' %}">
                                <i class="fas fa-shopping-cart"></i> Ver Carrito
                                {% if cantidad_carrito > 0 %}
                                <span class="dropdown-carrito-count">{{ cantidad_carrito }}</span>
                                {% endif %}
                            </a>
                        </li>
                    {% endif %}
                    <li class="divider"></li>
                    <li>
                        <a href="{% url 'logout' %}" class="logout-link">
                            <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                        </a>
                    </li>
                </ul>
            {% else %}
                <a href="#" class="user-link">
                    <i class="fas fa-user"></i> Cuenta ▾
                </a>
                <ul class="dropdown user-dropdown">
                    <li>
                        <a href="{% url 'login' %}">
                            <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'registro' %}">
                            <i class="fas fa-user-plus"></i> Registrarse
                        </a>
                    </li>
                </ul>
            {% endif %}
        </li>
        
        <!-- Icono de carrito (solo para usuarios normales) -->
        {% if user.is_authenticated and not user.is_staff and not user.is_superuser %}
        <li class="carrito-icon">
            <a href="{% url 'ver_carrito' %}">
                <i class="fas fa-shopping-cart"></i>
                {% if cantidad_carrito > 0 %}
                <span class="carrito-count">{{ cantidad_carrito }}</span>
                {% endif %}
            </a>
        </li>
        {% endif %}
    </ul>
</nav>