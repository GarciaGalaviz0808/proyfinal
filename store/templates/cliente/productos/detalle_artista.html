{% extends 'cliente/base.html' %}
{% load static %}

{% block title %}{{ artista.nombre }} - Artista - ArtStore{% endblock %}

{% block content %}
<div class="detalle-artista-container">
    <!-- Encabezado -->
    <div class="detalle-artista-header">
        <a href="{% url 'artistas' %}" class="volver-artistas">
            <i class="fas fa-arrow-left"></i> Volver a artistas
        </a>
        
        <div class="artista-perfil">
            {% if artista.foto %}
            <img src="{{ artista.foto.url }}" alt="{{ artista.nombre }}" class="artista-foto-grande">
            {% else %}
            <div class="artista-sin-foto-grande">
                <i class="fas fa-user-circle fa-2x"></i>
            </div>
            {% endif %}
            
            <div class="artista-info-principal">
                <h1>{{ artista.nombre }}</h1>
                <div class="artista-especialidad-detalle">
                    <i class="fas fa-paint-brush"></i>
                    <span>{{ artista.especialidad }}</span>
                </div>
                
                {% if artista.activo %}
                <div class="artista-status-badge">
                    <span class="activo"><i class="fas fa-circle"></i> Artista activo</span>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Biografía completa -->
    <div class="artista-biografia-completa">
        <h3><i class="fas fa-book-open"></i> Biografía</h3>
        <div class="biografia-contenido">
            {{ artista.biografia|linebreaks }}
        </div>
    </div>

    <!-- Obras del artista -->
    {% if productos %}
    <div class="obras-artista-section">
        <h3><i class="fas fa-palette"></i> Obras de {{ artista.nombre }}</h3>
        
        <div class="obras-artista-grid">
            {% for producto in productos %}
            <div class="obra-artista-card">
                {% if producto.imagen %}
                <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" class="obra-artista-imagen">
                {% else %}
                <div class="obra-sin-imagen">
                    <i class="fas fa-image fa-3x"></i>
                </div>
                {% endif %}
                
                <div class="obra-artista-info">
                    <h4>{{ producto.nombre }}</h4>
                    <p class="obra-tipo">{{ producto.get_tipo_display }}</p>
                    <p class="obra-precio">${{ producto.precio }}</p>
                    
                    {% if producto.stock > 0 %}
                    <a href="{% url 'detalle_producto' producto.id %}" class="btn-ver-obra">
                        <i class="fas fa-eye"></i> Ver detalles
                    </a>
                    {% else %}
                    <span class="agotado-badge">Agotado</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if artista.producto_set.count > 6 %}
        <div class="ver-todas-obras">
            <a href="{% url 'productos_por_categoria' 'obras' %}?artista={{ artista.id }}" class="btn-todas-obras">
                <i class="fas fa-paint-brush"></i> Ver todas las obras ({{ artista.producto_set.count }})
            </a>
        </div>
        {% endif %}
    </div>
    {% else %}
    <div class="no-obras-artista">
        <div class="no-obras-icon">
            <i class="fas fa-palette fa-3x"></i>
        </div>
        <h4>{{ artista.nombre }} no tiene obras disponibles actualmente</h4>
        <p>Vuelve pronto para ver sus nuevas creaciones.</p>
    </div>
    {% endif %}

    <!-- Información de contacto -->
    <div class="contacto-artista-section">
        <h3><i class="fas fa-envelope"></i> ¿Interesado en una obra personalizada?</h3>
        <p>Si te gusta el estilo de {{ artista.nombre }}, puedes solicitar un encargo personalizado.</p>
        
        <div class="opciones-contacto">
            <a href="{% url 'crear_encargo' %}?artista={{ artista.id }}" class="btn-solicitar-encargo">
                <i class="fas fa-paint-roller"></i> Solicitar encargo personalizado
            </a>
            
            <button class="btn-contactar-artista" onclick="contactarArtista()">
                <i class="fas fa-comment"></i> Consultar disponibilidad
            </button>
        </div>
    </div>

    <!-- Estadísticas -->
    <div class="estadisticas-artista">
        <div class="estadistica-item">
            <div class="estadistica-icon">
                <i class="fas fa-palette"></i>
            </div>
            <div class="estadistica-info">
                <h4>{{ artista.producto_set.count }}</h4>
                <p>Obras publicadas</p>
            </div>
        </div>
        
        <div class="estadistica-item">
            <div class="estadistica-icon">
                <i class="fas fa-star"></i>
            </div>
            <div class="estadistica-info">
                <h4>4.5</h4>
                <p>Valoración promedio</p>
            </div>
        </div>
        
        <div class="estadistica-item">
            <div class="estadistica-icon">
                <i class="fas fa-calendar-alt"></i>
            </div>
            <div class="estadistica-info">
                <h4>2020</h4>
                <p>Miembro desde</p>
            </div>
        </div>
        
        <div class="estadistica-item">
            <div class="estadistica-icon">
                <i class="fas fa-heart"></i>
            </div>
            <div class="estadistica-info">
                <h4>24</h4>
                <p>Obras vendidas</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
{% endblock %}

{% block scripts %}
<script>
function contactarArtista() {
    alert('Para consultar disponibilidad del artista {{ artista.nombre }}, por favor utiliza el formulario de encargos o envía un email a contacto@artstore.com');
}
</script>
{% endblock %}